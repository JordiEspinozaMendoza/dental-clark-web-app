{"ast":null,"code":"import _slicedToArray from\"C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../../components/Loader\";import Paginate from\"../../components/Paginator\";import{LinkContainer}from\"react-router-bootstrap\";import Message from\"../../components/Message\";import{createService,listServices,deleteService}from\"../../actions/serviceActions\";import{SERVICE_REGISTER_RESET,SERVICE_UPDATE_RESET}from\"../../constants/serviceConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ServicesScreen(_ref){var history=_ref.history;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),actualPage=_useState2[0],setActualPage=_useState2[1];var dispatch=useDispatch();var serviceList=useSelector(function(state){return state.serviceList;});var loading=serviceList.loading,success=serviceList.success,services=serviceList.services,pages=serviceList.pages,error=serviceList.error;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var serviceRegister=useSelector(function(state){return state.serviceRegister;});var loadingCreate=serviceRegister.loading,serviceCreated=serviceRegister.service,errorCreate=serviceRegister.error,successCreate=serviceRegister.success;var serviceDelete=useSelector(function(state){return state.serviceDelete;});var loadingDelete=serviceDelete.loading,successDelete=serviceDelete.success,errorDelete=serviceDelete.error;var createServiceHandler=function createServiceHandler(){dispatch(createService());};var deleteServiceHandler=function deleteServiceHandler(id){window.confirm(\"¿Seguro que deseas eliminar este servicio?\")&&dispatch(deleteService(id));};useEffect(function(){dispatch({type:SERVICE_REGISTER_RESET});!userInfo&&history.push(\"/\");successCreate?history.push(\"/services/\".concat(serviceCreated._id,\"/edit\")):dispatch(listServices(actualPage));},[dispatch,userInfo,actualPage,successCreate,successDelete]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",style:{minHeight:\"100vh\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){return createServiceHandler();},children:\"Registrar servicio\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-3\",children:\"Tratamientos\"}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):(services===null||services===void 0?void 0:services.length)==0?/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:\"No hay tratamientos actualmente\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:services===null||services===void 0?void 0:services.map(function(service){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:service.name}),/*#__PURE__*/_jsx(\"td\",{children:service.details}),/*#__PURE__*/_jsx(\"td\",{children:service.price}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/services/\".concat(service._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteServiceHandler(service._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},service._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,changePage:function changePage(value){return setActualPage(value);},pageToSearch:actualPage})]})]});}","map":{"version":3,"sources":["C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/src/views/ServicesScreen/index.js"],"names":["React","useState","useEffect","Table","Button","useDispatch","useSelector","Loader","Paginate","LinkContainer","Message","createService","listServices","deleteService","SERVICE_REGISTER_RESET","SERVICE_UPDATE_RESET","ServicesScreen","history","actualPage","setActualPage","dispatch","serviceList","state","loading","success","services","pages","error","userLogin","userInfo","serviceRegister","loadingCreate","serviceCreated","service","errorCreate","successCreate","serviceDelete","loadingDelete","successDelete","errorDelete","createServiceHandler","deleteServiceHandler","id","window","confirm","type","push","_id","minHeight","length","map","name","details","price","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../../components/Loader\";\r\nimport Paginate from \"../../components/Paginator\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport Message from \"../../components/Message\";\r\nimport {\r\n  createService,\r\n  listServices,\r\n  deleteService,\r\n} from \"../../actions/serviceActions\";\r\nimport {\r\n  SERVICE_REGISTER_RESET,\r\n  SERVICE_UPDATE_RESET,\r\n} from \"../../constants/serviceConstants\";\r\nexport default function ServicesScreen({ history }) {\r\n  const [actualPage, setActualPage] = useState(1);\r\n  const dispatch = useDispatch();\r\n  const serviceList = useSelector((state) => state.serviceList);\r\n  const { loading, success, services, pages, error } = serviceList;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const serviceRegister = useSelector((state) => state.serviceRegister);\r\n  const {\r\n    loading: loadingCreate,\r\n    service: serviceCreated,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n  } = serviceRegister;\r\n\r\n  const serviceDelete = useSelector((state) => state.serviceDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    success: successDelete,\r\n    error: errorDelete,\r\n  } = serviceDelete;\r\n\r\n  const createServiceHandler = () => {\r\n    dispatch(createService());\r\n  };\r\n\r\n  const deleteServiceHandler = (id) => {\r\n    window.confirm(\"¿Seguro que deseas eliminar este servicio?\") &&\r\n      dispatch(deleteService(id));\r\n  };\r\n  useEffect(() => {\r\n    dispatch({ type: SERVICE_REGISTER_RESET });\r\n\r\n    !userInfo && history.push(\"/\");\r\n    successCreate\r\n      ? history.push(`/services/${serviceCreated._id}/edit`)\r\n      : dispatch(listServices(actualPage));\r\n  }, [dispatch, userInfo, actualPage, successCreate, successDelete]);\r\n\r\n  return (\r\n    <div className=\"p-5\" style={{ minHeight: \"100vh\" }}>\r\n      <Button variant=\"primary\" onClick={() => createServiceHandler()}>\r\n        Registrar servicio\r\n      </Button>\r\n      <h2 className=\"mt-3\">Tratamientos</h2>\r\n      {loadingCreate && <Loader />}\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\r\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\r\n\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : services?.length == 0 ? (\r\n        <Message variant=\"warning\">No hay tratamientos actualmente</Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered hover responsive className=\"table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Nombre</th>\r\n                <th>Descripción</th>\r\n                <th>Precio</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {services?.map((service) => (\r\n                <tr key={service._id}>\r\n                  <td>{service.name}</td>\r\n                  <td>{service.details}</td>\r\n                  <td>{service.price}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/services/${service._id}/edit`}>\r\n                      <Button variant=\"light\" className=\"btn-sm\">\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      className=\"btn-sm\"\r\n                      onClick={() => deleteServiceHandler(service._id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate\r\n            pages={pages}\r\n            changePage={(value) => setActualPage(value)}\r\n            pageToSearch={actualPage}\r\n          ></Paginate>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}