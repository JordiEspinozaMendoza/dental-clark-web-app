{"ast":null,"code":"import _slicedToArray from\"C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{Modal,Table,Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../../../../Loader\";import Message from\"../../../../Message\";import{history}from\"../../../../../actions/consultActions\";import{LinkContainer}from\"react-router-bootstrap\";import{CONSULT_HISTORY_RESET}from\"../../../../../constants/consultConstants\";import Paginate from\"../../../../Paginator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ModalPatient(_ref){var patient=_ref.patient,lgShow=_ref.lgShow,loadingPatientDetails=_ref.loadingPatientDetails,errorPatientDetails=_ref.errorPatientDetails,hide=_ref.hide;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showHistory=_useState2[0],setShowHistory=_useState2[1];var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var consultHistory=useSelector(function(state){return state.consultHistory;});var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),pageToSearch=_useState4[0],setPageToSearch=_useState4[1];var loadingHistory=consultHistory.loading,errorHistory=consultHistory.error,consults=consultHistory.consults,pages=consultHistory.pages;var historyHandler=function historyHandler(){dispatch(history(\"patient\",patient._id,1));setShowHistory(!showHistory);};useEffect(function(){dispatch(history(\"patient\",patient._id,pageToSearch));},[pageToSearch,dispatch]);return/*#__PURE__*/_jsxs(Modal,{size:\"lg\",show:lgShow,onHide:function onHide(){hide();setShowHistory(false);setPageToSearch(1);},\"aria-labelledby\":\"example-modal-sizes-title-lg\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"example-modal-sizes-title-lg\",children:\"Detalles del paciente\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:loadingPatientDetails?/*#__PURE__*/_jsx(Loader,{}):errorPatientDetails?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorPatientDetails}):/*#__PURE__*/_jsx(_Fragment,{children:patient?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"p\",{children:patient[\"name\"]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Apellidos\"}),/*#__PURE__*/_jsx(\"p\",{children:patient[\"lastName\"]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Edad\"}),/*#__PURE__*/_jsx(\"p\",{children:patient[\"age\"]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Correo\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(patient[\"email\"]),children:patient[\"email\"]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"p\",{children:patient[\"phone\"]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){return historyHandler();},children:showHistory==true?\"Ocultar historial\":\"Mostrar historial\"}),showHistory&&(loadingHistory?/*#__PURE__*/_jsx(Loader,{}):errorHistory?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorHistory}):consults.length==0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Este usuario no tiene consultas\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Encargado\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Detalles / tratamiento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Abon\\xF3\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:consults===null||consults===void 0?void 0:consults.map(function(consult){return/*#__PURE__*/_jsxs(\"tr\",{children:[userInfo.isAdmin?/*#__PURE__*/_jsx(LinkContainer,{className:\"editPerson\",to:\"/admin/user/\".concat(consult.user[\"_id\"],\"/edit\"),children:/*#__PURE__*/_jsx(\"td\",{children:consult.user[\"name\"]})}):/*#__PURE__*/_jsx(\"td\",{children:consult.user[\"name\"]}),/*#__PURE__*/_jsx(\"td\",{children:consult.date.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:consult.details}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$ \",consult.price]})]},consult._id);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,changePage:function changePage(value){return setPageToSearch(value);},pageToSearch:pageToSearch})]}))]}):\"\"})})]});}","map":{"version":3,"sources":["C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/src/components/Dashboard/components/patients/components/modalPatient.js"],"names":["useEffect","useState","Modal","Table","Button","useDispatch","useSelector","Loader","Message","history","LinkContainer","CONSULT_HISTORY_RESET","Paginate","ModalPatient","patient","lgShow","loadingPatientDetails","errorPatientDetails","hide","dispatch","showHistory","setShowHistory","userLogin","state","userInfo","consultHistory","pageToSearch","setPageToSearch","loadingHistory","loading","errorHistory","error","consults","pages","historyHandler","_id","length","map","consult","isAdmin","user","date","substring","details","price","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Modal, Table, Button } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../../../../Loader\";\r\nimport Message from \"../../../../Message\";\r\nimport { history } from \"../../../../../actions/consultActions\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { CONSULT_HISTORY_RESET } from \"../../../../../constants/consultConstants\";\r\nimport Paginate from \"../../../../Paginator\";\r\n\r\nexport default function ModalPatient({\r\n  patient,\r\n  lgShow,\r\n  loadingPatientDetails,\r\n  errorPatientDetails,\r\n  hide,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n  const consultHistory = useSelector((state) => state.consultHistory);\r\n  const [pageToSearch, setPageToSearch] = useState(1);\r\n  const {\r\n    loading: loadingHistory,\r\n    error: errorHistory,\r\n    consults,\r\n    pages,\r\n  } = consultHistory;\r\n\r\n  const historyHandler = () => {\r\n    dispatch(history(\"patient\", patient._id, 1));\r\n    setShowHistory(!showHistory);\r\n  };\r\n  useEffect(() => {\r\n    dispatch(history(\"patient\", patient._id, pageToSearch));\r\n  }, [pageToSearch, dispatch]);\r\n  return (\r\n    <Modal\r\n      size=\"lg\"\r\n      show={lgShow}\r\n      onHide={() => {\r\n        hide();\r\n        setShowHistory(false);\r\n        setPageToSearch(1);\r\n      }}\r\n      aria-labelledby=\"example-modal-sizes-title-lg\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"example-modal-sizes-title-lg\">\r\n          Detalles del paciente\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {loadingPatientDetails ? (\r\n          <Loader />\r\n        ) : errorPatientDetails ? (\r\n          <Message variant=\"danger\">{errorPatientDetails}</Message>\r\n        ) : (\r\n          <>\r\n            {patient ? (\r\n              <>\r\n                <h5>Nombre</h5>\r\n                <p>{patient[\"name\"]}</p>\r\n                <h5>Apellidos</h5>\r\n                <p>{patient[\"lastName\"]}</p>\r\n                <h5>Edad</h5>\r\n                <p>{patient[\"age\"]}</p>\r\n                <h5>Correo</h5>\r\n                <p>\r\n                  <a href={`mailto:${patient[\"email\"]}`}>{patient[\"email\"]}</a>\r\n                </p>\r\n                <h5>Teléfono</h5>\r\n                <p>{patient[\"phone\"]}</p>\r\n                <Button variant=\"primary\" onClick={() => historyHandler()}>\r\n                  {showHistory == true\r\n                    ? \"Ocultar historial\"\r\n                    : \"Mostrar historial\"}\r\n                </Button>\r\n                {showHistory &&\r\n                  (loadingHistory ? (\r\n                    <Loader />\r\n                  ) : errorHistory ? (\r\n                    <Message variant=\"danger\">{errorHistory}</Message>\r\n                  ) : consults.length == 0 ? (\r\n                    <Message variant=\"info\">\r\n                      Este usuario no tiene consultas\r\n                    </Message>\r\n                  ) : (\r\n                    <>\r\n                      <Table\r\n                        striped\r\n                        bordered\r\n                        hover\r\n                        responsive\r\n                        className=\"table-sm mt-3\"\r\n                      >\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Encargado</th>\r\n                            <th>Fecha</th>\r\n                            <th>Detalles / tratamiento</th>\r\n                            <th>Abonó</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {consults?.map((consult) => (\r\n                            <tr key={consult._id}>\r\n                              {userInfo.isAdmin ? (\r\n                                <LinkContainer\r\n                                  className=\"editPerson\"\r\n                                  to={`/admin/user/${consult.user[\"_id\"]}/edit`}\r\n                                >\r\n                                  <td>{consult.user[\"name\"]}</td>\r\n                                </LinkContainer>\r\n                              ) : (\r\n                                <td>{consult.user[\"name\"]}</td>\r\n                              )}\r\n                              <td>{consult.date.substring(0, 10)}</td>\r\n                              <td>{consult.details}</td>\r\n                              <td>$ {consult.price}</td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </Table>\r\n                      <Paginate\r\n                        pages={pages}\r\n                        changePage={(value) => setPageToSearch(value)}\r\n                        pageToSearch={pageToSearch}\r\n                      ></Paginate>\r\n                    </>\r\n                  ))}\r\n              </>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </>\r\n        )}\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}