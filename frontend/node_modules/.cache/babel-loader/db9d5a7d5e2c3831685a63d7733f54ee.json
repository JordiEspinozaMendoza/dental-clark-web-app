{"ast":null,"code":"import _slicedToArray from\"C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Table,Button,InputGroup,Modal}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Loader from\"../../../Loader\";import Message from\"../../../Message\";import{LinkContainer}from\"react-router-bootstrap\";import{listConsults,consultDetails,consultDelete}from\"../../../../actions/consultActions\";import\"react-datetime/css/react-datetime.css\";import\"./consults.css\";import moment from\"moment\";import ModalConsult from\"./components/modalConsult\";import Paginate from\"../../../Paginator\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function TodayConsults(props){var dispatch=useDispatch();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),pageToSearch=_useState2[0],setPageToSearch=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),lgShow=_useState4[0],setLgShow=_useState4[1];var consultList=useSelector(function(state){return state.consultList;});var loading=consultList.loading,error=consultList.error,consults=consultList.consults,pages=consultList.pages;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var todayDate=new moment().format(\"YYYY-MM-DD\");var _useState5=useState(todayDate),_useState6=_slicedToArray(_useState5,2),dateSearch=_useState6[0],setDateSearch=_useState6[1];var consultDetailsReducer=useSelector(function(state){return state.consultDetails;});var loadingDetails=consultDetailsReducer.loading,errorDetails=consultDetailsReducer.error,myConsult=consultDetailsReducer.consult;var consultDeleteReducer=useSelector(function(state){return state.consultDelete;});var loadingDelete=consultDeleteReducer.loading,errorDelete=consultDeleteReducer.error,successDelete=consultDeleteReducer.success;useEffect(function(){dispatch(listConsults(dateSearch,pageToSearch));},[dispatch,userInfo,successDelete,pageToSearch]);var getConsultDetails=function getConsultDetails(id){dispatch(consultDetails(id));};var deleteConsultHandler=function deleteConsultHandler(id){window.confirm(\"¿Seguro que deseas eliminar a este paciente?\")&&dispatch(consultDelete(id));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Consultas de hoy\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm mt-3\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Encargado\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paciente\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Precio total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Saldo pendiente\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:consults===null||consults===void 0?void 0:consults.map(function(consult){return/*#__PURE__*/_jsxs(\"tr\",{children:[userInfo.isAdmin?/*#__PURE__*/_jsx(LinkContainer,{className:\"editPerson\",to:\"/admin/user/\".concat(consult.user[\"_id\"],\"/edit\"),children:/*#__PURE__*/_jsx(\"td\",{children:consult.user[\"name\"]})}):/*#__PURE__*/_jsx(\"td\",{children:consult.user[\"name\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"editPerson\",onClick:function onClick(){return props.onChangePatientEditId(\"editPatient\",consult.patient[\"_id\"]);},children:consult.patient[\"name\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$ \",consult.price]}),consult.price-consult.payment>0?/*#__PURE__*/_jsxs(\"td\",{style:{color:\"red\"},children:[\"$\",consult.price-consult.payment]}):/*#__PURE__*/_jsx(\"td\",{style:{color:\"green\"},children:\"PAGO COMPLETO\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{variant:\"info\",className:\"btn-sm\",onClick:function onClick(){getConsultDetails(consult._id);setLgShow(true);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})}),/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",onClick:function onClick(){props.onChangeConsultEditId(\"editConsult\",consult._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteConsultHandler(consult._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},consult._id);})})]}),/*#__PURE__*/_jsx(ModalConsult,{consult:myConsult,error:errorDetails,loading:loadingDetails,lgShow:lgShow,hide:function hide(){return setLgShow(false);},editPatient:function editPatient(id){return props.onChangePatientEditId(\"editPatient\",id);}}),/*#__PURE__*/_jsx(Paginate,{pages:pages,changePage:function changePage(value){return setPageToSearch(value);},pageToSearch:pageToSearch})]});}","map":{"version":3,"sources":["C:/Users/dell/Documents/Proyects/Dental Clark/backend/frontend/src/components/Dashboard/components/consults/todayConsults.js"],"names":["React","useState","useEffect","Table","Button","InputGroup","Modal","useDispatch","useSelector","Loader","Message","LinkContainer","listConsults","consultDetails","consultDelete","moment","ModalConsult","Paginate","TodayConsults","props","dispatch","pageToSearch","setPageToSearch","lgShow","setLgShow","consultList","state","loading","error","consults","pages","userLogin","userInfo","todayDate","format","dateSearch","setDateSearch","consultDetailsReducer","loadingDetails","errorDetails","myConsult","consult","consultDeleteReducer","loadingDelete","errorDelete","successDelete","success","getConsultDetails","id","deleteConsultHandler","window","confirm","map","isAdmin","user","onChangePatientEditId","patient","price","payment","color","_id","onChangeConsultEditId","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Table, Button, InputGroup, Modal } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Loader from \"../../../Loader\";\r\nimport Message from \"../../../Message\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport {\r\n  listConsults,\r\n  consultDetails,\r\n  consultDelete,\r\n} from \"../../../../actions/consultActions\";\r\nimport \"react-datetime/css/react-datetime.css\";\r\nimport \"./consults.css\";\r\nimport moment from \"moment\";\r\n\r\nimport ModalConsult from \"./components/modalConsult\";\r\nimport Paginate from \"../../../Paginator\";\r\n\r\nexport default function TodayConsults(props) {\r\n  const dispatch = useDispatch();\r\n\r\n  const [pageToSearch, setPageToSearch] = useState(1);\r\n\r\n  const [lgShow, setLgShow] = useState(false);\r\n\r\n  const consultList = useSelector((state) => state.consultList);\r\n  const { loading, error, consults, pages } = consultList;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  var todayDate = new moment().format(\"YYYY-MM-DD\");\r\n  const [dateSearch, setDateSearch] = useState(todayDate);\r\n\r\n  const consultDetailsReducer = useSelector((state) => state.consultDetails);\r\n  const {\r\n    loading: loadingDetails,\r\n    error: errorDetails,\r\n    consult: myConsult,\r\n  } = consultDetailsReducer;\r\n\r\n  const consultDeleteReducer = useSelector((state) => state.consultDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = consultDeleteReducer;\r\n\r\n  useEffect(() => {\r\n    dispatch(listConsults(dateSearch, pageToSearch));\r\n  }, [dispatch, userInfo, successDelete, pageToSearch]);\r\n\r\n  const getConsultDetails = (id) => {\r\n    dispatch(consultDetails(id));\r\n  };\r\n\r\n  const deleteConsultHandler = (id) => {\r\n    window.confirm(\"¿Seguro que deseas eliminar a este paciente?\") &&\r\n      dispatch(consultDelete(id));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Consultas de hoy</h1>\r\n\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : (\r\n        <Table striped bordered hover responsive className=\"table-sm mt-3\">\r\n          <thead>\r\n            <tr>\r\n              <th>Encargado</th>\r\n              <th>Paciente</th>\r\n\r\n              <th>Precio total</th>\r\n              <th>Saldo pendiente</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {consults?.map((consult) => (\r\n              <tr key={consult._id}>\r\n                {userInfo.isAdmin ? (\r\n                  <LinkContainer\r\n                    className=\"editPerson\"\r\n                    to={`/admin/user/${consult.user[\"_id\"]}/edit`}\r\n                  >\r\n                    <td>{consult.user[\"name\"]}</td>\r\n                  </LinkContainer>\r\n                ) : (\r\n                  <td>{consult.user[\"name\"]}</td>\r\n                )}\r\n                <td\r\n                  className=\"editPerson\"\r\n                  onClick={() =>\r\n                    props.onChangePatientEditId(\r\n                      \"editPatient\",\r\n                      consult.patient[\"_id\"]\r\n                    )\r\n                  }\r\n                >\r\n                  {consult.patient[\"name\"]}\r\n                </td>\r\n                <td>$ {consult.price}</td>\r\n                {consult.price - consult.payment > 0 ? (\r\n                  <td style={{ color: \"red\" }}>\r\n                    ${consult.price - consult.payment}\r\n                  </td>\r\n                ) : (\r\n                  <td style={{ color: \"green\" }}>PAGO COMPLETO</td>\r\n                )}\r\n                <td>\r\n                  <Button\r\n                    variant=\"info\"\r\n                    className=\"btn-sm\"\r\n                    onClick={() => {\r\n                      getConsultDetails(consult._id);\r\n                      setLgShow(true);\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-eye\"></i>\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"light\"\r\n                    className=\"btn-sm\"\r\n                    onClick={() => {\r\n                      props.onChangeConsultEditId(\"editConsult\", consult._id);\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-edit\"></i>\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"danger\"\r\n                    className=\"btn-sm\"\r\n                    onClick={() => deleteConsultHandler(consult._id)}\r\n                  >\r\n                    <i className=\"fas fa-trash\"></i>\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      )}\r\n      <ModalConsult\r\n        consult={myConsult}\r\n        error={errorDetails}\r\n        loading={loadingDetails}\r\n        lgShow={lgShow}\r\n        hide={() => setLgShow(false)}\r\n        editPatient={(id) => props.onChangePatientEditId(\"editPatient\", id)}\r\n      ></ModalConsult>\r\n      <Paginate\r\n        pages={pages}\r\n        changePage={(value) => setPageToSearch(value)}\r\n        pageToSearch={pageToSearch}\r\n      ></Paginate>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}